<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://daheesong.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://daheesong.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2025-07-21T11:58:55+00:00</updated><id>https://daheesong.github.io/feed.xml</id><title type="html">blank</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. </subtitle><entry><title type="html">An Overview of Path Planning</title><link href="https://daheesong.github.io/blog/2025/an-overview-of-path-planning/" rel="alternate" type="text/html" title="An Overview of Path Planning"/><published>2025-07-20T09:40:30+00:00</published><updated>2025-07-20T09:40:30+00:00</updated><id>https://daheesong.github.io/blog/2025/an-overview-of-path-planning</id><content type="html" xml:base="https://daheesong.github.io/blog/2025/an-overview-of-path-planning/"><![CDATA[<p>Path planning(경로 계획)의 개념은 다음과 같습니다: 환경 정보를 얼마나 알고 있는가에 따라 환경 정보가 완전히 알려진 global path planning과 부분적으로 환경 정보가 알려진 local path planning으로 나눌 수 있습니다. 또한 환경 내 장애물이 움직이는지의 여부에 따라 장애물이 정적인 static planning과 장애물이 동적인 dynamic planning으로 나뉠 수 있습니다. 그리고, 모바일 로봇 시스템에서 제어 가능한 변수의 수가 로봇의 attitude 공간 차원보다 작은지의 여부에 따라, 제어 가능한 자유도가 전체 자세 공간보다 같거나 많은 (ex, 드론, x-y평면에서 움직이는 로봇 팔) holonomic system의 운동 계획, 그와 반대 되는 non-holonomic system의 운동 계획으로 나뉠 수 있습니다.</p> <p>Global path planning은 시작점에서 목표지점까지의 순수한 기하학적 경로를 다룹니다. Local path planning은 obstacle avoidance planning, dynamic path planning, real-time navigation planning이라고도 불립니다. 장애물을 탐지하고 움직이는 장애물의 괘적을 추적하며 다음 위치를 예측하는데 초점을 맞춥니다. 결과, 현재 존재하는 충돌 위험과 잠재적인 충돌 위험이 포함된 지도를 생성하게 됩니다.</p> <p>Path planning을 수행하기 위해서는, 우선 모바일 로봇의 이동 환경 모델을 구축해야 합니다. 환경은 보통 정적(static)과 동적(dynamic) 환경으로 나눌 수 있습니다. 정적 환경은 상대적으로 단순하지만, 대부분의 환경은 실시간으로 변화하는 동적 환경입니다. 이러한 특성은 경로 계획 알고리즘에 높은 실시간성과 robustness를 요구합니다. 현재 사용되는 환경 모델링 방법은 주로 모바일 로봇의 주변 환경 정보를 수집하여, map subsystem을 통해 기하학적/위상학적 특성을 갖춘 지도상에 표현하는 것입니다. 이 지도에는 도로 혹은 사물간의 연결 관계가 포함됩니다. 가장 단순한 지도 생성 방법은 항공 사진에서 이를 추출하여 라벨링하는 것 입니다. 동적 환경에는 MOT(Multi-object tracking) 또는 DATMO (Detection and tracking moving object) 서브시스템이 사용되어, 로봇 주변의 장애물의 위치나 방향을 탐지 및 추적합니다.</p> <p>전통적인 환경 모델링 방법은 다음과 같습니다:</p> <ul> <li>Multi-object tracking: 센서 데이터를 분할하고 분할된 데이터를 장애물에 연결하여, 대상별 위치 추정을 위해 할당된 데이터를 평균 처리하고 필터(ex, Kalman Filter or Particle Filter)로 위치를 갱신한다.</li> <li>Model based Approach: 센서의 물리 모델과 객체의 기하학 모델을 활용하여 필터(ex, Particle filter)로 직접 데이터를 해석한다.</li> <li>Stereo Vision based method: 스테레오 이미지에서 제공되는 색상 및 깊이 정보를 이용해 움직이는 장애물을 탐지 및 추적한다. ESS는 전방 카메라의 동기화된 영상 만으로 장애물을 탐지하는 기법을 제안한다.</li> <li>Raster Map based method: occupancy grid map을 먼저 구축하고, 분할, 연관, 필터링 단계를 통해 객체 수준의 장면 표현을 제공한다.</li> <li>Sensor fusion: 다양한 센서를 융합하여 환경 인식을 향상한다.</li> <li>Deep Laerning: DNN을 통해 이동 장애물의 위치 및 기하학적 특징을 추출하고, 현재 카메라 데이터를 바탕으로 미래 상태를 추적한다.</li> <li>V2X: Vehicle to Everything은 차량 간, 차량과 인프라 간, 차량과 보행자 간, 차량과 네트워크 간 통신을 가능케 함으로서 실시간 도로 상황, 정보, 보행자 정보 등을 알 수 있으며, V2V(ehicle), V2I(nfra), V2P(erson), V2N(etwork)을 포함한다.</li> </ul> <p>Path planning 알고리즘은 크게 세 가지로 나뉩니다. 1) 지도 기반의 전통적인 경로 계획 알고리즘 (Dijkstra, A*), 2) 생물 모방 기반의 지능형 경로 계획 알고리즘 (PSO, 유전자 알고리즘, 강화 학습), 3) 샘플링 기반의 경로 계획 알고리즘 (RRT).</p> <p>지도 기반 전통 경로 계획 알고리즘은 대표적으로 5가지가 있습니다: Dijkstra, a<em>, D</em>, LPA<em>, D</em> Lite. 이들은 A* 계열로 알고리즘을 실행하기 전 환경 모델을 반드시 구축해야합니다.</p> <p>Dijkstra 알고리즘은 탐욕적 원칙을 기반으로 하여 노드를 하나씩 순차적으로 탐색하고, 완화(relaxation) 방법으로 경로를 최적화합니다. 최종적으로 최적 경로를 리스트에 저장하여 최적 경로 문제를 해결하는 방식으로, 지도 데이터가 작을 때는 효과적이지만, 데이터 양이 많을 경우 성능이 급격히 떨어집니다. 우선순위 큐와 역 N-트리를 결합하면 성능이 향상될 수 있으며, 제한된 범위 내에서의 탐색 방식을 도입하면 탐색 범위 및 횟수를 줄여 검색 효율을 향상할 수 있습니다.</p> <p>A* 알고리즘은 Dijkstra 알고리즘을 개선한 heuristic 탐색 알고리즘입니다. 추정 함수를 추가하여, 탐색 위치와 목표 지점 간의 거리를 예측함으로서 탐색 방향을 목표 지점 쪽으로 우선 유도 합니다. 기본 함수 형태는 f(x) = g(x) + h(x)입니다. g(x)는 시작점에서 현재 노드 x까지의 실제 거리를 의미하며, h(x)는 현재 노드 x에서 목표점까지의 최소 거리 추정값입니다. Dijkstra에 비해 탐색 횟수가 줄고 속도가 빨라서 널리 사용됩니다. 또한, 목표 지점 근처로 갈수록 탐색 범위가 좁아집니다.</p> <p>D* 알고리즘은 Dynamic A* 알고리즘입니다. 목표점에서 시작점 방향으로 탐색하는 Reverse Incremental Search 방식을 사용하며, 도중 장애물이 나타나면, 기존 거리 정보를 재사용하여 전체 경로를 재계산하지 않고 부분만 갱신합니다. H(x) = H(y) + C(y,x) 공식을 사용하며 H(y)는 y지점에서 목표까지의 거리이고, C(y,x)는 y지점에서 x지점까지의 거리를 의미합니다.</p> <p>LPA* 알고리즘은 Life Planning A*의 약어로, Increasement heuristic serarch 알고리즘입니다. 시작점에서 탐색을 시작하며, key값을 기준으로 탐색을 진행합니다. 목표 지점이 다음 탐색 대상이 되면 계획을 완료하고, Key 값은 휴리스틱 요소를 포함하여 탐색 방향에 영향을 줍니다. 동적 환경에서도 이전 탐색에서 얻은 G 값을 활용하여 전체 환경을 재 탐색하지 않고 빠르게 경로 재계획 가능합니다. G(n)은 시작점에서 현재 노드까지의 거리이며, RHS(n)은 min(g(n)+c(n,n’)) (n’은 n의 부모 노드), h(n, goal)은 목표에 대한 휴리스틱 값을 의미합니다. 먼저 K1 값을 비교하고, K1이 작으면 해당 노드를 우선 탐색, K1 = K2이면 K2가 더 작은 노드를 우선하며 탐색합니다.</p> <p>D* Lite 알고리즘은 LPA*을 기반으로 제안한 경로 계획 알고리즘입니다. Key 계산 시 목표점(goal) 대신 시작점을 기준으로 한 정보를 사용하며, 알고리즘은 역방향 탐색으로 시작하여 최적 경로를 찾고, 동적 장애물이 나타나면 국지적인 범위에서 탐색을 재시작합니다. 경로 탐색 정보를 재활용할 수 있고, 장애물로 인해 기준 경로의 사용이 불가할 시, 현재 위치에서 빠르게 최적 경로 재계획이 가능합니다.</p> <p>생물 기반의 경로 계획 알고리즘으로는 신경망, 개미 군집 알고리즘, 늑대 군집 알고리즘, 유전 알고리즘 등이 있습니다. 유전 알고리즘은 자연 선택과 다윈의 진화 메커니즘을 모방하여 최적 해를 탐색하는 알고리즘입니다. 주요 특징은 함수의 도함수나 연속성의 제약 없이 구조적 개체를 직접 다룰 수 있으며, 내재된 병렬성과 뛰어난 전역 최적화 능력을 갖추고 있다는 것입니다. 확률 기반의 방식으로 명확한 규칙 없이도 최적 해 탐색이 가능합니다. 신경망 알고리즘은 많은 수의 노드(또는 뉴런)로 구성된 연산 모델로, 각 노드는 활성화 함수라 불리는 특정 출력 함수를 가지며, 노드 간 연결은 가중치를 통해 신호 강도를 조절한다. 이 가중치는 인공 신경망의 기억에 해당합니다. 개미 군집 알고리즘은 현재 널리 사용되는 지능형 알고리즘 중 하나지만, 반복 횟수가 많고 수렴 속도가 느리며 국소 최적 해에 빠지기 쉽다는 단점이 있습니다. fuzzy 알고리즘을 결합하여 수렴 속도를 개선하거나, 유전 알고리즘과의 결합을 통해 최적 경로를 도출하는 방식 등이 있습니다.</p> <p>샘플링 기반 경로 계획 알고리즘은 확률적 로드맵(PRM)과 빠른 탐색 랜덤 트리(RRT)가 대표적입니다. PRM 알고리즘은 경로 공간에서 무작위로 N개의 노드를 선택하고, 각 노드를 연결한 뒤 장애물과 충돌하는 연결을 제거하여 실행 가능한 경로를 생성하는 방식입니다. 샘플링 포인트 수가 적거나 배치가 비효율적이면 알고리즘의 완전성이 떨어지지만, 샘플링을 추가하면 보완할 수 있습니다. 따라서 PRM은 확률적 완전성은 있지만 최적성은 없습니다. RRT (Rapidly exploring random tree)는 경로 공간의 모델링이 필요 없고 탐색 범위가 넓으며 미지 영역을 광범위하게 탐색할 수 있는 장점이 있습니다. 하지만 계산 비용이 크며, 이를 해결하기 위해 다양한 변형 알고리즘 (Goal-Bias RRT, Bi-RRT, RRT-Connect, Extend RRT, Local-Tree-RRT, Dynamic RRT)이 존재합니다.</p> <p>References: @article{Tang_2021, doi = {10.1088/1755-1315/804/2/022024}, url = {https://dx.doi.org/10.1088/1755-1315/804/2/022024}, year = {2021}, month = {jul}, publisher = {IOP Publishing}, volume = {804}, number = {2}, pages = {022024}, author = {Tang, Zhuozhen and Ma, Hongzhong}, title = {An overview of path planning algorithms}, journal = {IOP Conference Series: Earth and Environmental Science}, abstract = {This paper reviews the basic concepts of path planning, classifies environmental modeling methods, analyzes the significance of V2X environment modeling, and summarizes the existing path planning algorithms. Different algorithm can be adjusted in time according to different environments to improve the efficiency of path planning. In addition, according to the advantages and disadvantages of different algorithms, each algorithm is fused, which can effectively avoid the shortcomings of each algorithm and improve the efficiency of the planning algorithm.} }</p>]]></content><author><name></name></author><category term="sample-posts"/><category term="path_planning"/><summary type="html"><![CDATA[reviews the basic concepts of path planning and summarizes the existing path planning algorithms]]></summary></entry><entry><title type="html">a post with code diff</title><link href="https://daheesong.github.io/blog/2024/code-diff/" rel="alternate" type="text/html" title="a post with code diff"/><published>2024-01-27T19:22:00+00:00</published><updated>2024-01-27T19:22:00+00:00</updated><id>https://daheesong.github.io/blog/2024/code-diff</id><content type="html" xml:base="https://daheesong.github.io/blog/2024/code-diff/"><![CDATA[<p>You can display diff code by using the regular markdown syntax:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">diff
</span><span class="gh">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
</span><span class="gd">--- a/sample.js
</span><span class="gi">+++ b/sample.js
</span><span class="p">@@ -1 +1 @@</span>
<span class="gd">-console.log("Hello World!")
</span><span class="gi">+console.log("Hello from Diff2Html!")</span>
<span class="p">```</span>
</code></pre></div></div> <p>Which generates:</p> <div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
</span><span class="gd">--- a/sample.js
</span><span class="gi">+++ b/sample.js
</span><span class="p">@@ -1 +1 @@</span>
<span class="gd">-console.log("Hello World!")
</span><span class="gi">+console.log("Hello from Diff2Html!")
</span></code></pre></div></div> <p>But this is difficult to read, specially if you have a large diff. You can use <a href="https://diff2html.xyz/">diff2html</a> to display a more readable version of the diff. For this, just use <code class="language-plaintext highlighter-rouge">diff2html</code> instead of <code class="language-plaintext highlighter-rouge">diff</code> for the code block language:</p> <div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">```</span><span class="nl">diff2html
</span><span class="sb">diff --git a/sample.js b/sample.js
index 0000001..0ddf2ba
--- a/sample.js
+++ b/sample.js
@@ -1 +1 @@
-console.log("Hello World!")
+console.log("Hello from Diff2Html!")</span>
<span class="p">```</span>
</code></pre></div></div> <p>If we use a longer example, for example <a href="https://github.com/rtfpessoa/diff2html/commit/c2c253d3e3f8b8b267f551e659f72b44ca2ac927">this commit from diff2html</a>, it will generate the following output:</p> <pre><code class="language-diff2html">From 2aaae31cc2a37bfff83430c2c914b140bee59b6a Mon Sep 17 00:00:00 2001
From: Rodrigo Fernandes &lt;rtfrodrigo@gmail.com&gt;
Date: Sun, 9 Oct 2016 16:41:54 +0100
Subject: [PATCH 1/2] Initial template override support

---
 scripts/hulk.js                    |  4 ++--
 src/diff2html.js                   |  3 +--
 src/file-list-printer.js           | 11 ++++++++---
 src/hoganjs-utils.js               | 29 +++++++++++++++++------------
 src/html-printer.js                |  6 ++++++
 src/line-by-line-printer.js        |  6 +++++-
 src/side-by-side-printer.js        |  6 +++++-
 test/file-list-printer-tests.js    |  2 +-
 test/hogan-cache-tests.js          | 18 +++++++++++++++---
 test/line-by-line-tests.js         |  3 +--
 test/side-by-side-printer-tests.js |  3 +--
 11 files changed, 62 insertions(+), 29 deletions(-)

diff --git a/scripts/hulk.js b/scripts/hulk.js
index 5a793c18..a4b1a4d5 100755
--- a/scripts/hulk.js
+++ b/scripts/hulk.js
@@ -173,11 +173,11 @@ function namespace(name) {
 // write a template foreach file that matches template extension
 templates = extractFiles(options.argv.remain)
   .map(function(file) {
-    var openedFile = fs.readFileSync(file, 'utf-8');
+    var openedFile = fs.readFileSync(file, 'utf-8').trim();
     var name;
     if (!openedFile) return;
     name = namespace(path.basename(file).replace(/\..*$/, ''));
-    openedFile = removeByteOrderMark(openedFile.trim());
+    openedFile = removeByteOrderMark(openedFile);
     openedFile = wrap(file, name, openedFile);
     if (!options.outputdir) return openedFile;
     fs.writeFileSync(path.join(options.outputdir, name + '.js')
diff --git a/src/diff2html.js b/src/diff2html.js
index 21b0119e..64e138f5 100644
--- a/src/diff2html.js
+++ b/src/diff2html.js
@@ -7,7 +7,6 @@

 (function() {
   var diffParser = require('./diff-parser.js').DiffParser;
-  var fileLister = require('./file-list-printer.js').FileListPrinter;
   var htmlPrinter = require('./html-printer.js').HtmlPrinter;

   function Diff2Html() {
@@ -43,7 +42,7 @@

     var fileList = '';
     if (configOrEmpty.showFiles === true) {
-      fileList = fileLister.generateFileList(diffJson, configOrEmpty);
+      fileList = htmlPrinter.generateFileListSummary(diffJson, configOrEmpty);
     }

     var diffOutput = '';
diff --git a/src/file-list-printer.js b/src/file-list-printer.js
index e408d9b2..1e0a2c61 100644
--- a/src/file-list-printer.js
+++ b/src/file-list-printer.js
@@ -8,11 +8,16 @@
 (function() {
   var printerUtils = require('./printer-utils.js').PrinterUtils;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var baseTemplatesPath = 'file-summary';
   var iconsBaseTemplatesPath = 'icon';

-  function FileListPrinter() {
+  function FileListPrinter(config) {
+    this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   FileListPrinter.prototype.generateFileList = function(diffFiles) {
@@ -38,5 +43,5 @@
     });
   };

-  module.exports.FileListPrinter = new FileListPrinter();
+  module.exports.FileListPrinter = FileListPrinter;
 })();
diff --git a/src/hoganjs-utils.js b/src/hoganjs-utils.js
index 9949e5fa..0dda08d7 100644
--- a/src/hoganjs-utils.js
+++ b/src/hoganjs-utils.js
@@ -8,18 +8,19 @@
 (function() {
   var fs = require('fs');
   var path = require('path');
-
   var hogan = require('hogan.js');

   var hoganTemplates = require('./templates/diff2html-templates.js');

-  var templatesPath = path.resolve(__dirname, 'templates');
+  var extraTemplates;

-  function HoganJsUtils() {
+  function HoganJsUtils(configuration) {
+    this.config = configuration || {};
+    extraTemplates = this.config.templates || {};
   }

-  HoganJsUtils.prototype.render = function(namespace, view, params, configuration) {
-    var template = this.template(namespace, view, configuration);
+  HoganJsUtils.prototype.render = function(namespace, view, params) {
+    var template = this.template(namespace, view);
     if (template) {
       return template.render(params);
     }
@@ -27,17 +28,16 @@
     return null;
   };

-  HoganJsUtils.prototype.template = function(namespace, view, configuration) {
-    var config = configuration || {};
+  HoganJsUtils.prototype.template = function(namespace, view) {
     var templateKey = this._templateKey(namespace, view);

-    return this._getTemplate(templateKey, config);
+    return this._getTemplate(templateKey);
   };

-  HoganJsUtils.prototype._getTemplate = function(templateKey, config) {
+  HoganJsUtils.prototype._getTemplate = function(templateKey) {
     var template;

-    if (!config.noCache) {
+    if (!this.config.noCache) {
       template = this._readFromCache(templateKey);
     }

@@ -53,6 +53,7 @@

     try {
       if (fs.readFileSync) {
+        var templatesPath = path.resolve(__dirname, 'templates');
         var templatePath = path.join(templatesPath, templateKey);
         var templateContent = fs.readFileSync(templatePath + '.mustache', 'utf8');
         template = hogan.compile(templateContent);
@@ -66,12 +67,16 @@
   };

   HoganJsUtils.prototype._readFromCache = function(templateKey) {
-    return hoganTemplates[templateKey];
+    return extraTemplates[templateKey] || hoganTemplates[templateKey];
   };

   HoganJsUtils.prototype._templateKey = function(namespace, view) {
     return namespace + '-' + view;
   };

-  module.exports.HoganJsUtils = new HoganJsUtils();
+  HoganJsUtils.prototype.compile = function(templateStr) {
+    return hogan.compile(templateStr);
+  };
+
+  module.exports.HoganJsUtils = HoganJsUtils;
 })();
diff --git a/src/html-printer.js b/src/html-printer.js
index 585d5b66..13f83047 100644
--- a/src/html-printer.js
+++ b/src/html-printer.js
@@ -8,6 +8,7 @@
 (function() {
   var LineByLinePrinter = require('./line-by-line-printer.js').LineByLinePrinter;
   var SideBySidePrinter = require('./side-by-side-printer.js').SideBySidePrinter;
+  var FileListPrinter = require('./file-list-printer.js').FileListPrinter;

   function HtmlPrinter() {
   }
@@ -22,5 +23,10 @@
     return sideBySidePrinter.generateSideBySideJsonHtml(diffFiles);
   };

+  HtmlPrinter.prototype.generateFileListSummary = function(diffJson, config) {
+    var fileListPrinter = new FileListPrinter(config);
+    return fileListPrinter.generateFileList(diffJson);
+  };
+
   module.exports.HtmlPrinter = new HtmlPrinter();
 })();
diff --git a/src/line-by-line-printer.js b/src/line-by-line-printer.js
index b07eb53c..d230bedd 100644
--- a/src/line-by-line-printer.js
+++ b/src/line-by-line-printer.js
@@ -11,7 +11,8 @@
   var utils = require('./utils.js').Utils;
   var Rematch = require('./rematch.js').Rematch;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var genericTemplatesPath = 'generic';
   var baseTemplatesPath = 'line-by-line';
   var iconsBaseTemplatesPath = 'icon';
@@ -19,6 +20,9 @@

   function LineByLinePrinter(config) {
     this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   LineByLinePrinter.prototype.makeFileDiffHtml = function(file, diffs) {
diff --git a/src/side-by-side-printer.js b/src/side-by-side-printer.js
index bbf1dc8d..5e3033b3 100644
--- a/src/side-by-side-printer.js
+++ b/src/side-by-side-printer.js
@@ -11,7 +11,8 @@
   var utils = require('./utils.js').Utils;
   var Rematch = require('./rematch.js').Rematch;

-  var hoganUtils = require('./hoganjs-utils.js').HoganJsUtils;
+  var hoganUtils;
+
   var genericTemplatesPath = 'generic';
   var baseTemplatesPath = 'side-by-side';
   var iconsBaseTemplatesPath = 'icon';
@@ -26,6 +27,9 @@

   function SideBySidePrinter(config) {
     this.config = config;
+
+    var HoganJsUtils = require('./hoganjs-utils.js').HoganJsUtils;
+    hoganUtils = new HoganJsUtils(config);
   }

   SideBySidePrinter.prototype.makeDiffHtml = function(file, diffs) {
diff --git a/test/file-list-printer-tests.js b/test/file-list-printer-tests.js
index a502a46f..60ea3208 100644
--- a/test/file-list-printer-tests.js
+++ b/test/file-list-printer-tests.js
@@ -1,6 +1,6 @@
 var assert = require('assert');

-var fileListPrinter = require('../src/file-list-printer.js').FileListPrinter;
+var fileListPrinter = new (require('../src/file-list-printer.js').FileListPrinter)();

 describe('FileListPrinter', function() {
   describe('generateFileList', function() {
diff --git a/test/hogan-cache-tests.js b/test/hogan-cache-tests.js
index 190bf6f8..3bb754ac 100644
--- a/test/hogan-cache-tests.js
+++ b/test/hogan-cache-tests.js
@@ -1,6 +1,6 @@
 var assert = require('assert');

-var HoganJsUtils = require('../src/hoganjs-utils.js').HoganJsUtils;
+var HoganJsUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)();
 var diffParser = require('../src/diff-parser.js').DiffParser;

 describe('HoganJsUtils', function() {
@@ -21,16 +21,28 @@ describe('HoganJsUtils', function() {
       });
       assert.equal(emptyDiffHtml, result);
     });
+
     it('should render view without cache', function() {
       var result = HoganJsUtils.render('generic', 'empty-diff', {
         contentClass: 'd2h-code-line',
         diffParser: diffParser
       }, {noCache: true});
-      assert.equal(emptyDiffHtml + '\n', result);
+      assert.equal(emptyDiffHtml, result);
     });
+
     it('should return null if template is missing', function() {
-      var result = HoganJsUtils.render('generic', 'missing-template', {}, {noCache: true});
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)({noCache: true});
+      var result = hoganUtils.render('generic', 'missing-template', {});
       assert.equal(null, result);
     });
+
+    it('should allow templates to be overridden', function() {
+      var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');
+
+      var config = {templates: {'generic-empty-diff': emptyDiffTemplate}};
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
   });
 });
diff --git a/test/line-by-line-tests.js b/test/line-by-line-tests.js
index 1cd92073..8869b3df 100644
--- a/test/line-by-line-tests.js
+++ b/test/line-by-line-tests.js
@@ -14,7 +14,7 @@ describe('LineByLinePrinter', function() {
         '            File without changes\n' +
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
-        '&lt;/tr&gt;\n';
+        '&lt;/tr&gt;';

       assert.equal(expected, fileHtml);
     });
@@ -422,7 +422,6 @@ describe('LineByLinePrinter', function() {
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
         '&lt;/tr&gt;\n' +
-        '\n' +
         '                &lt;/tbody&gt;\n' +
         '            &lt;/table&gt;\n' +
         '        &lt;/div&gt;\n' +
diff --git a/test/side-by-side-printer-tests.js b/test/side-by-side-printer-tests.js
index 76625f8e..771daaa5 100644
--- a/test/side-by-side-printer-tests.js
+++ b/test/side-by-side-printer-tests.js
@@ -14,7 +14,7 @@ describe('SideBySidePrinter', function() {
         '            File without changes\n' +
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
-        '&lt;/tr&gt;\n';
+        '&lt;/tr&gt;';

       assert.equal(expectedRight, fileHtml.right);
       assert.equal(expectedLeft, fileHtml.left);
@@ -324,7 +324,6 @@ describe('SideBySidePrinter', function() {
         '        &lt;/div&gt;\n' +
         '    &lt;/td&gt;\n' +
         '&lt;/tr&gt;\n' +
-        '\n' +
         '                    &lt;/tbody&gt;\n' +
         '                &lt;/table&gt;\n' +
         '            &lt;/div&gt;\n' +

From f3cadb96677d0eb82fc2752dc3ffbf35ca9b5bdb Mon Sep 17 00:00:00 2001
From: Rodrigo Fernandes &lt;rtfrodrigo@gmail.com&gt;
Date: Sat, 15 Oct 2016 13:21:22 +0100
Subject: [PATCH 2/2] Allow uncompiled templates

---
 README.md                 |  3 +++
 src/hoganjs-utils.js      |  7 +++++++
 test/hogan-cache-tests.js | 24 +++++++++++++++++++++++-
 3 files changed, 33 insertions(+), 1 deletion(-)

diff --git a/README.md b/README.md
index 132c8a28..46909f25 100644
--- a/README.md
+++ b/README.md
@@ -98,6 +98,9 @@ The HTML output accepts a Javascript object with configuration. Possible options
   - `synchronisedScroll`: scroll both panes in side-by-side mode: `true` or `false`, default is `false`
   - `matchWordsThreshold`: similarity threshold for word matching, default is 0.25
   - `matchingMaxComparisons`: perform at most this much comparisons for line matching a block of changes, default is `2500`
+  - `templates`: object with previously compiled templates to replace parts of the html
+  - `rawTemplates`: object with raw not compiled templates to replace parts of the html
+  &gt; For more information regarding the possible templates look into [src/templates](https://github.com/rtfpessoa/diff2html/tree/master/src/templates)

 ## Diff2HtmlUI Helper

diff --git a/src/hoganjs-utils.js b/src/hoganjs-utils.js
index 0dda08d7..b2e9c275 100644
--- a/src/hoganjs-utils.js
+++ b/src/hoganjs-utils.js
@@ -17,6 +17,13 @@
   function HoganJsUtils(configuration) {
     this.config = configuration || {};
     extraTemplates = this.config.templates || {};
+
+    var rawTemplates = this.config.rawTemplates || {};
+    for (var templateName in rawTemplates) {
+      if (rawTemplates.hasOwnProperty(templateName)) {
+        if (!extraTemplates[templateName]) extraTemplates[templateName] = this.compile(rawTemplates[templateName]);
+      }
+    }
   }

   HoganJsUtils.prototype.render = function(namespace, view, params) {
diff --git a/test/hogan-cache-tests.js b/test/hogan-cache-tests.js
index 3bb754ac..a34839c0 100644
--- a/test/hogan-cache-tests.js
+++ b/test/hogan-cache-tests.js
@@ -36,7 +36,7 @@ describe('HoganJsUtils', function() {
       assert.equal(null, result);
     });

-    it('should allow templates to be overridden', function() {
+    it('should allow templates to be overridden with compiled templates', function() {
       var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');

       var config = {templates: {'generic-empty-diff': emptyDiffTemplate}};
@@ -44,5 +44,27 @@ describe('HoganJsUtils', function() {
       var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
       assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
     });
+
+    it('should allow templates to be overridden with uncompiled templates', function() {
+      var emptyDiffTemplate = '&lt;p&gt;&lt;/p&gt;';
+
+      var config = {rawTemplates: {'generic-empty-diff': emptyDiffTemplate}};
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
+
+    it('should allow templates to be overridden giving priority to compiled templates', function() {
+      var emptyDiffTemplate = HoganJsUtils.compile('&lt;p&gt;&lt;/p&gt;');
+      var emptyDiffTemplateUncompiled = '&lt;p&gt;Not used!&lt;/p&gt;';
+
+      var config = {
+        templates: {'generic-empty-diff': emptyDiffTemplate},
+        rawTemplates: {'generic-empty-diff': emptyDiffTemplateUncompiled}
+      };
+      var hoganUtils = new (require('../src/hoganjs-utils.js').HoganJsUtils)(config);
+      var result = hoganUtils.render('generic', 'empty-diff', {myName: 'Rodrigo Fernandes'});
+      assert.equal('&lt;p&gt;Rodrigo Fernandes&lt;/p&gt;', result);
+    });
   });
 });
</code></pre>]]></content><author><name></name></author><category term="sample-posts"/><category term="formatting"/><category term="code"/><summary type="html"><![CDATA[this is how you can display code diffs]]></summary></entry></feed>